<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Elaine blog</title>
	 <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<link rel="stylesheet" href="/blog/css/style.css">
	<link rel="stylesheet" href="/blog/css/highlight.css">
</head>
<body>
<header>
  <h1>Elaine <span>Blog<span></h1>
</header>     
<section class="container">
	<div class="arc-con">
		<h1 id="正则表达式">正则表达式</h1>

<h3 id="1-定义正则表达式">1. 定义正则表达式</h3>

<h4 id="通过构造函数">通过构造函数</h4>

<p>第一个参数为正则表达式的文本内容，第二个参数表示匹配g（全文查找），i（忽略大小写） ，m（多行查找）</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">var</span> <span class="n">re</span> <span class="o">=</span> <span class="kp">new</span> <span class="no">RegExp</span><span class="p">();</span><span class="sr">//</span><span class="no">RegExp</span><span class="err">是一个对象</span><span class="p">,</span><span class="err">和</span><span class="no">Aarray</span><span class="err">一样</span>  
<span class="sr">//</span><span class="err">但这样没有任何效果</span><span class="p">,</span><span class="err">需要将正则表达式的内容作为字符串传递进去</span>  
<span class="n">re</span> <span class="o">=</span><span class="kp">new</span> <span class="no">RegExp</span><span class="p">(</span><span class="s2">"a"</span><span class="p">);</span><span class="sr">//</span><span class="err">最简单的正则表达式</span><span class="p">,</span><span class="err">将匹配字母</span><span class="n">a</span>  
<span class="n">re</span><span class="o">=</span><span class="kp">new</span> <span class="no">RegExp</span><span class="p">(</span><span class="s2">"a"</span><span class="p">,</span><span class="s2">"i"</span><span class="p">);</span><span class="sr">//</span><span class="err">第二个参数</span><span class="p">,</span><span class="err">表示匹配时不分大小写</span>  </code></pre></figure>

<h4 id="通过也就是两个斜杠">通过//，也就是两个斜杠</h4>

<h3 id="2-正则表达式对象的常用属性和方法">2. 正则表达式对象的常用属性和方法</h3>

<ul>
  <li>test返回一个 Boolean 值，它指出在被查找的字符串中是否存在模式。如果存在则返回 true，否则就返回 false。</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">re</span> <span class="o">=</span> <span class="sr">/^a|bc$/</span><span class="p">;</span><span class="sr">//</span><span class="err">将匹配开始位置的</span><span class="n">a</span><span class="err">或结束位置的</span><span class="n">bc</span>  
<span class="n">str</span> <span class="o">=</span><span class="s2">"add"</span><span class="p">;</span>  
<span class="n">alert</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="n">str</span><span class="p">));</span><span class="sr">//</span><span class="kp">true</span> </code></pre></figure>

<ul>
  <li>match找到一个或多个正则表达式的匹配。</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">var</span> <span class="n">str</span><span class="o">=</span><span class="s2">"1 plus 2 equal 3"</span>
<span class="n">document</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sr">/\d+/</span><span class="n">g</span><span class="p">))</span> <span class="o">/</span><span class="sr">/1,2,3</span></code></pre></figure>

<ul>
  <li>replace替换与正则表达式匹配的子串。</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">var</span> <span class="n">re</span> <span class="o">=</span> <span class="sr">/[a-z]$/</span><span class="p">;</span>  
<span class="n">var</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"ab</span><span class="se">\n</span><span class="s2">cdef"</span><span class="p">;</span>  
<span class="n">alert</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="n">re</span><span class="p">,</span><span class="s2">"#"</span><span class="p">));</span><span class="sr">//</span><span class="n">ab</span><span class="p">\</span><span class="n">ncde</span><span class="c1"># </span></code></pre></figure>

<ul>
  <li>search检索与正则表达式相匹配的值，返回stringObject 中第一个与 regexp 相匹配的子串的起始位置,当search方法没有找到匹配时,将返回-1。</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">var</span> <span class="n">str</span><span class="o">=</span><span class="s2">"Visit W3School!"</span>
<span class="n">document</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="nf">search</span><span class="p">(</span><span class="sr">/W3School/</span><span class="p">))</span> <span class="o">/</span><span class="sr">/6</span></code></pre></figure>

<ul>
  <li>lastIndex属性声明的是上一次匹配文本之后的第一个字符的位置,默认值是-1。</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">var</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"The rain in ..."</span><span class="p">;</span>
<span class="n">var</span> <span class="n">patt1</span> <span class="o">=</span> <span class="kp">new</span> <span class="no">RegExp</span><span class="p">(</span><span class="s2">"ain"</span><span class="p">,</span> <span class="s2">"g"</span><span class="p">);</span>

<span class="n">patt1</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
<span class="n">document</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s2">"Match found. index now at: "</span> <span class="o">+</span> <span class="n">patt1</span><span class="p">.</span><span class="nf">lastIndex</span><span class="p">);</span>  <span class="sr">//</span><span class="mi">8</span></code></pre></figure>

<h3 id="3-正则表达式中的特殊字符">3. 正则表达式中的特殊字符</h3>

<h4 id="字符含义">字符含义</h4>

<p>“.” 代表任意字符</p>

<p>“^” 匹配一个输入或一行的开头，**/^a/匹配”an A”，而不匹配”An a” **</p>

<p>”$” 匹配一个输入或一行的结尾，**/a$/匹配”An a”，而不匹配”an A” **</p>

<p>”*” 匹配前面元字符0次或多次，表示{0,} **/ba*/将匹配”b,ba,baa,baaa” **</p>

<p>”+” 匹配前面元字符1次或多次，表示{1,} <strong>/ba+/将匹配”ba,baa,baaa”</strong></p>

<p>”?” 匹配前面元字符0次或1次，表示{0,1} **/ba\？/将匹配b,ba **，可匹配，可不匹配，优先是可匹配</p>

<p>“(x)” 匹配x保存x在名为$1…$9的变量，（）得到的是子表达式</p>

<table>
  <tbody>
    <tr>
      <td>“x</td>
      <td>y “匹配x或y</td>
    </tr>
  </tbody>
</table>

<p>“{n} “精确匹配n次</p>

<p>“{n,}” 匹配n次以上</p>

<p>“{n,m}” 匹配n-m次</p>

<p>“[xyz]” 字符集(character set)，匹配这个集合中的任一一个字符(或元字符)</p>

<p>”[^xyz]” 不匹配这个集合中的任何一个字符</p>

<p>”[\b]” 匹配一个退格符</p>

<p>“\b” 匹配一个单词的边界</p>

<p>“\B” 匹配一个单词的非边界</p>

<p>“\cX” 这儿，X是一个控制符，**/\cM/匹配Ctrl-M **</p>

<p>“\d” 匹配一个字数字符，**/\d/ = /[0-9]/ **</p>

<p>“\D” 匹配一个非数字字符，<strong>/\D/ = /[^0-9]/</strong></p>

<p>“\s” 匹配一个空白字符，包括\n,\r,\f,\t,\v等</p>

<p>“\S” 匹配一个非空白字符，等于/[^\n\f\r\t\v]/</p>

<p>“\n” 匹配一个换行符</p>

<p>“\r” 匹配一个回车符</p>

<p>“\f” 匹配一个换页符</p>

<p>“\t” 匹配一个制表符</p>

<p>“\v” 匹配一个顶头制表符</p>

<p>“\w” 匹配一个可以组成单词的字符，包括下划线，**[\w]匹配”$5.98”中的5，等于[a-zA-Z0-9] **</p>

<p>“\W” 匹配一个不可以组成单词的字符，<strong>[\W]匹配”$5.98”中的$，等于[^a-zA-Z0-9]，注意有中括号</strong></p>

<p>”" 转义字符反斜杠, <strong>匹配问号开头/^\?/</strong></p>

<h3 id="4-正则表达式的优先级">4. 正则表达式的优先级</h3>

<ol>
  <li>\ 转义符</li>
  <li>(), (?:), (?=), [] 圆括号和方括号</li>
  <li>*, +, ?, {n}, {n,}, {n,m} 限定符</li>
  <li>^, $, \anymetacharacter 位置和顺序</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>“或”操作</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>

<h3 id="5-正则表达式捕获组">5. 正则表达式捕获组</h3>
<p>捕获组就是把正则表达式中子表达式（即是用小括号括起来的内容）匹配的内容，保存到内存中以数字编号或显示命名的组里，方便后面使用，可以在正则表达式内部使用，</p>

<p>也可以在外部使用。</p>

<p>捕获组分组语法：(子表达式)</p>

<p>捕获性分组的编号规则：编号是按照”(”出现的顺序，从左到右，从1开始进行编号</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="sr">//</span> <span class="err">分组的列子</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="sr">/(longen){2}/</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="s2">"longen"</span><span class="p">));</span> <span class="sr">//</span> <span class="kp">false</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="sr">/(longen){2}/</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="s2">"longenlongen"</span><span class="p">));</span> <span class="sr">//</span><span class="kp">true</span>
<span class="sr">//</span> <span class="err">分组的运用</span> <span class="no">RegExp</span><span class="o">.</span><span class="vg">$1</span> <span class="err">获取小括号的分组</span>
<span class="n">var</span> <span class="n">str</span> <span class="o">=</span> <span class="mi">11122</span><span class="p">;</span>
<span class="sr">/(\d+)/</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="no">RegExp</span><span class="o">.</span><span class="vg">$1</span><span class="p">);</span> <span class="sr">//</span> <span class="mi">11122</span>

<span class="sr">//</span> <span class="err">使用</span><span class="n">replace</span><span class="err">替换</span> <span class="err">使用分组</span> <span class="err">把内容替换</span>
<span class="n">var</span> <span class="n">num</span> <span class="o">=</span> <span class="s2">"11 22"</span><span class="p">;</span>
<span class="n">var</span> <span class="n">n</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sr">/(\d+)\s*(\d+)/</span><span class="p">,</span><span class="s2">"$2 $1"</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">n</span><span class="p">);</span> <span class="sr">//</span> <span class="mi">22</span> <span class="mi">11</span></code></pre></figure>

<h3 id="6-正则表达式非捕获性分组">6. 正则表达式非捕获性分组</h3>

<p>要创建一个非捕获性分组，只要在分组的左括号的后面紧跟一个问号与冒号就ok，非捕获分组的含义我们可以理解为如下：子表达式可以作为被整体修饰但是子表达式匹配的结果不会被存储。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="sr">//</span> <span class="err">非捕获性分组</span>
<span class="n">var</span> <span class="n">num2</span> <span class="o">=</span> <span class="s2">"11 22"</span><span class="p">;</span>
<span class="sr">/#(?:\d+)/</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="n">num2</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="no">RegExp</span><span class="o">.</span><span class="vg">$1</span><span class="p">);</span> <span class="sr">//</span><span class="s2">""</span>
<span class="err">我们再来看下使用</span> <span class="err">非捕获性分组来把页面上的所有标签都去掉，如下代码：</span>
<span class="sr">//</span> <span class="err">把页面上所有的标签都移除掉</span>
<span class="n">var</span> <span class="n">html</span> <span class="o">=</span> <span class="s2">"&lt;p&gt;&lt;a href='http://baidu.com'&gt;我来测试下&lt;/a&gt;by &lt;em&gt;龙恩&lt;/em&gt;&lt;/p&gt;"</span><span class="p">;</span>
<span class="n">var</span> <span class="n">text</span> <span class="o">=</span> <span class="n">html</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sr">/&lt;(?:.|\s)*?&gt;/</span><span class="n">g</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">text</span><span class="p">);</span> <span class="sr">//</span> <span class="err">我来测试下</span><span class="n">by</span> <span class="err">龙恩</span></code></pre></figure>

<table>
  <tbody>
    <tr>
      <td>如上：我们来分析下：正则/&lt;(?:.</td>
      <td>\s)*?&gt;/g 的含义是：g是修饰符，全局匹配的含义；使用非捕获性分组?: 的含义是 子表达式可以作为被整体修饰但是子表达式匹配的结果不会被存储；因此：正则/&lt;(?:.</td>
      <td>\s)*?&gt;/g 的含义变为：匹配以&lt; 开头 及 &gt; 结束的所有字符；(?:.</td>
      <td>\s)*? 含义是：. 代表任意字符，</td>
      <td>含义是或者的意思，\s 是匹配空格的意思；*号修饰符的含义是零个或者多个的意思；后面的?（问号）代表可匹配，可不匹配的含义；优先是可匹配；总起来的意思是：全局匹配字符串html 中的 以<开头 以="">结尾的所有字符 替换成 空字符串，因此留下来就是文本。</开头></td>
    </tr>
  </tbody>
</table>

<h3 id="7-正则表达式反向引用">7. 正则表达式反向引用</h3>

<p>捕获性分组取到的内容，不仅可以在正则表达式外部通过程序进行引用，也可以在正则表达式内部进行引用，这种引用方式就叫做反向引用，并不是所有分组都能创建反向引用，非捕获性分组不能创建反向引用。</p>

<p>捕获性分组的反向引用的写法如：\number</p>

<p>Number是十进制数字，即捕获组的编号。</p>

<p><strong>反向引用的匹配原理</strong></p>

<p>捕获分组在匹配成功时，会将子表达式匹配到的内容，保存到内存中一个以数字编号的组里，可以简单的认为是对一个局部变量进行了赋值，这时就可以通过反向引用，引用这个局部变量的值。一个捕获分组在匹配成功之前，它的内容可以是不确定的，一旦匹配成功了，它的内容就确定了，反向引用的内容也就确定了。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">var</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">"longenaabcd"</span><span class="p">;</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="sr">/([ab])\1/</span><span class="p">)[</span><span class="mi">0</span><span class="p">]);</span><span class="sr">//</span><span class="n">aa</span></code></pre></figure>

<p>代码分析：对于如上代码中的正则 /([ab])\1/, 捕获组中子表达式[ab]；可以匹配a，也可以匹配b，但是如果匹配成功的话，那么它的反向引用也就确定了，如果捕获分组匹配到的是a，那么它的反向引用就只能匹配a，如果捕获分组匹配到的是b，那么它的反向引用就只能匹配到b；\1的含义是 捕获分组匹配到是什么，那么它必须与捕获分组到是相同的字符；也就是说 只能匹配到aa或者bb才能匹配成功；</p>

<p>该正则匹配的过程我们可以来分析下：</p>

<p>字符串匹配正则/([ab])\1/, 在位置0处开始匹配，0处字符是l，很明显不满足，把控制权就交给下一个字符，一直到第6个字符，才匹配到a，匹配成功，把控制权交给\1, 也就是反向引用和分组中是相同的字符，因此也匹配a，字符串中下一个字符也是a，因此匹配成功，因此整个表达式找到匹配的字符，匹配的位置开始于6，结束与8；我们再可以匹配b。</p>

<h3 id="8-正则表达式环视">8. 正则表达式环视</h3>

<p>环视强调的是它所在的位置，前面或者后面，必须满足环视表达式中的匹配情况，才能匹配成功。</p>

<p>环视可以认为是虚拟加入到它所在位置的附加判断条件，并不消耗正则的匹配字符。</p>

<p>环视有顺序和逆序2种，顺序和逆序又分为肯定和否定，因此共加起来有四种；但是javascript中只支持顺序环视</p>

<p>如下说明：</p>

<p>(?=Expression):</p>

<p>顺序肯定环视，含义是所在的位置右侧位置能够匹配到regexp.</p>

<p>(?!Expression)</p>

<p>顺序否定环视，含义是所在的位置右侧位置不能匹配到regexp</p>

<p>正则(?=A)[A-Z]匹配的是：</p>

<ol>
  <li>(?=A)所在的位置，后面是A</li>
  <li>表达式[A-Z]匹配A-Z中任意一个字母</li>
  <li>根据两个的先后位置关系，组合在一起，那就是：(?=A)所在的位置，后面是A，而且是A-Z中任意一个字母</li>
</ol>

<h3 id="9-正则表达式几个常用实例说明">9. 正则表达式几个常用实例说明</h3>

<h4 id="匹配以数字结尾的"><strong>匹配以数字结尾的</strong></h4>

<p>正则：/\d+$/g;</p>

<h4 id="去掉空格"><strong>去掉空格</strong></h4>

<p>var str = “我 是 龙 恩”;</p>

<p>console.log(str.replace(/\s+/g,””));//我是龙恩</p>

<h4 id="校验是否全由数字组成"><strong>校验是否全由数字组成</strong></h4>

<p>/^[0-9]{1,20}$/或者/^\d*$/</p>

<p>^ 表示打头的字符要匹配紧跟^后面的规则</p>

<p>$ 表示打头的字符要匹配紧靠$前面的规则</p>

<p>[ ] 中的内容是可选字符集</p>

<p>[0-9] 表示要求字符范围在0-9之间</p>

<p>{1,20}表示数字字符串长度合法为1到20，即为[0-9]中的字符出现次数的范围是1到20次。</p>

<p>/^ 和 $/成对使用应该是表示要求整个字符串完全匹配定义的规则，而不是只匹配字符串中的一个子串。</p>

<h4 id="校验登录名只能输入5-20个以字母开头可带数字_的字串"><strong>校验登录名：只能输入5-20个以字母开头、可带数字、“_”、“.”的字串</strong></h4>

<table>
  <tbody>
    <tr>
      <td>/^[a-zA-Z]{1}([a-zA-Z0-9]</td>
      <td>[._]){4,19}$/</td>
    </tr>
  </tbody>
</table>

<p>^[a-zA-Z]{1} 表示第一个字符要求是字母。</p>

<table>
  <tbody>
    <tr>
      <td>([a-zA-Z0-9]</td>
      <td>[.<em>]){4,19} 表示从第二位开始（因为它紧跟在上个表达式后面）的一个长度为4到9位的字符串，它要求是由大小写字母、数字或者特殊字符集[.</em>]组成。</td>
    </tr>
  </tbody>
</table>

<h4 id="校验用户姓名只能输入1-30个以字母开头的字串"><strong>校验用户姓名：只能输入1-30个以字母开头的字串</strong></h4>

<p>/^[a-zA-Z]{1,30}$/</p>

<h4 id="校验密码只能输入6-20个字母数字下划线"><strong>校验密码：只能输入6-20个字母、数字、下划线</strong></h4>

<p>/^(\w){6,20}$/</p>

<p>\w：用于匹配字母，数字或下划线字符</p>

<h4 id="校验普通电话传真号码可以或数字开头可含有--和--"><strong>校验普通电话、传真号码：可以“+”或数字开头，可含有“-” 和 “ ”</strong></h4>

<table>
  <tbody>
    <tr>
      <td>/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)</td>
      <td>[ ]){1,12})+$/</td>
    </tr>
  </tbody>
</table>

<p>\d：用于匹配从0到9的数字；</p>

<p>“?”元字符规定其前导对象必须在目标对象中连续出现零次或一次</p>

<p>可以匹配的字符串如：+123 -999 999 ； +123-999 999 ；123 999 999 ；+123 999999等</p>

<h4 id="校验url"><strong>校验URL</strong></h4>

<p>/^http[s]{0,1}:\/\/.+$/ 或 /^http[s]{0,1}:\/\/.{1,n}$/</p>

<p>\ / ：表示字符“/”。</p>

<p>“.” 表示所有字符的集</p>

<p>“+” 等同于{1,}，就是1到正无穷</p>

<h4 id="校验纯中文字符"><strong>校验纯中文字符</strong></h4>

<p>/^[\u4E00-\u9FA5]+$/</p>

<p>[\u4E00-\u9FA5] ：估计是中文字符集的范围吧</p>

<h4 id="替换小数点前面的内容为指定内容"><strong>替换小数点前面的内容为指定内容</strong></h4>

<p>var href = “aa.php?d=1”;</p>

<p>var reg = href.replace(/\b^(\w*)(?=.)/,”bb”);</p>

<p>console.log(reg); // bb.php?d=1</p>

<h4 id="限制文本框只能输入数字和小数点二位小数点"><strong>限制文本框只能输入数字和小数点(二位小数点)</strong></h4>

<p>分析：开头有0个或者多个数字，中间有0个或者1个小数点，小数点后面有0个或者最多2个数字；</p>

<p>/^\d*.?\d{0,2}$/</p>


	</div>
</section>   
<footer>
	<p>Copyright &copy; 2017@Elaine Blog / All rights reserved.</p>
</footer>